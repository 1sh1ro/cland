export type Language = "en" | "zh";

type Dictionary = Record<string, string>;

const en: Dictionary = {
  "header.eyebrow": "CLAND",
  "header.title": "Current time",
  "header.generatePlan": "Generate Plan",
  "header.clearExplanation": "Clear Explanation",
  "header.settings": "Settings",
  "contact.label": "Contact",
  "nl.title": "Natural Language Input",
  "nl.placeholder": "Example: Finish proposal draft by next Wednesday, 6 hours total",
  "nl.parse": "Parse with AI",
  "nl.parsing": "Parsing...",
  "tasks.title": "Tasks",
  "tasks.empty": "No tasks yet.",
  "tasks.remove": "Remove",
  "tasks.prev": "Prev",
  "tasks.next": "Next",
  "tasks.page": "Page {current} / {total}",
  "taskForm.new": "New Task",
  "taskForm.edit": "Edit Task",
  "taskForm.title": "Title",
  "taskForm.description": "Description",
  "taskForm.titlePlaceholder": "Project proposal",
  "taskForm.descriptionPlaceholder": "Short scope or notes",
  "taskForm.estimate": "Estimate (minutes)",
  "taskForm.priority": "Priority (1-5)",
  "taskForm.earliest": "Earliest start",
  "taskForm.deadline": "Deadline",
  "taskForm.minBlock": "Min block (minutes)",
  "taskForm.maxBlock": "Max block (minutes)",
  "taskForm.interruptible": "Interruptible (allow multiple blocks)",
  "taskForm.add": "Add Task",
  "taskForm.update": "Update Task",
  "taskForm.cancel": "Cancel",
  "taskForm.clear": "Clear",
  "busy.title": "Busy Events",
  "busy.defaultTitle": "Meeting",
  "busy.fieldTitle": "Title",
  "busy.start": "Start",
  "busy.end": "End",
  "busy.add": "Add Busy Event",
  "busy.empty": "No busy events.",
  "busy.remove": "Remove",
  "plan.title": "Plan Review",
  "plan.empty": "Generate a plan to review scheduled blocks.",
  "plan.replan": "Replan Remaining",
  "plan.warnings": "Warnings",
  "plan.noWarnings": "No conflicts detected.",
  "plan.assumptions": "Assumptions",
  "plan.blocks": "Blocks",
  "plan.explain": "Explain Plan",
  "plan.explaining": "Explaining...",
  "plan.aiExplanation": "AI Explanation",
  "plan.noExplanation": "No explanation yet.",
  "plan.lock": "Lock",
  "plan.unknownTask": "Unknown task",
  "calendar.title": "Schedule View",
  "calendar.weekView": "7-Day Row",
  "calendar.focusView": "3-Day Focus",
  "calendar.morning": "Morning",
  "calendar.afternoon": "Afternoon",
  "calendar.evening": "Evening",
  "calendar.empty": "No items",
  "memo.title": "Memo",
  "memo.placeholder": "Quick reminders...",
  "knowledge.title": "Knowledge Base",
  "knowledge.categories": "Categories",
  "knowledge.all": "All",
  "knowledge.newCategory": "New category",
  "knowledge.addCategory": "Add",
  "knowledge.newEntry": "New Entry",
  "knowledge.entryTitle": "Title",
  "knowledge.entryContent": "Content",
  "knowledge.entryCategory": "Category",
  "knowledge.addEntry": "Add Entry",
  "knowledge.list": "Entries",
  "knowledge.empty": "No knowledge entries yet.",
  "knowledge.view": "View",
  "knowledge.delete": "Delete",
  "knowledge.uncategorized": "Uncategorized",
  "knowledge.detailsTitle": "Knowledge Details",
  "knowledge.category": "Category",
  "knowledge.createdAt": "Created",
  "knowledge.needContent": "Add content before saving.",
  "knowledge.untitled": "Untitled",
  "ai.title": "AI Assistant",
  "ai.ask": "Ask",
  "ai.classify": "Classify",
  "ai.question": "Question",
  "ai.thinking": "Thinking...",
  "ai.classifyHint": "Use AI to classify the current draft. Categories: {count}",
  "ai.suggested": "Suggested category:",
  "ai.apply": "Apply",
  "ai.noTitle": "Untitled draft",
  "ai.noContent": "No content yet.",
  "ai.needQuestion": "Enter a question first.",
  "ai.needDraft": "Add draft content or title first.",
  "ai.failed": "AI request failed.",
  "settings.title": "Settings",
  "settings.workingHours": "Working Hours",
  "settings.start": "Start",
  "settings.end": "End",
  "settings.lunchStart": "Lunch start",
  "settings.lunchEnd": "Lunch end",
  "settings.horizon": "Planning horizon (days)",
  "settings.maxDaily": "Max daily focus (minutes)",
  "settings.timezone": "Timezone",
  "settings.language": "Language",
  "settings.aiTitle": "AI API",
  "settings.provider": "Provider",
  "settings.providerOpenAI": "OpenAI Compatible",
  "settings.providerAnthropic": "Anthropic Compatible",
  "settings.model": "Model",
  "settings.baseUrl": "Base URL",
  "settings.apiKey": "API Key",
  "settings.hint": "API settings are stored locally in the app.",
  "status.addTaskPrompt": "Add at least one task to generate a plan.",
  "status.planGenerated": "Plan generated at {time}.",
  "status.parseEnter": "Enter task text to parse.",
  "status.parsing": "Parsing tasks...",
  "status.parsed": "Parsed {count} tasks.",
  "status.parseFailed": "Failed to parse tasks.",
  "status.explainNeedKey": "Add an API key to request explanations.",
  "status.explainFailed": "Failed to explain plan.",
  "modal.close": "Close",
  "modal.taskDetailsTitle": "Task Details",
  "modal.progress": "Progress",
  "modal.completed": "Completed",
  "modal.remaining": "Remaining",
  "modal.details": "Details",
  "modal.priority": "Priority",
  "modal.estimate": "Estimate",
  "modal.minBlock": "Min block",
  "modal.maxBlock": "Max block",
  "modal.deadline": "Deadline",
  "modal.earliest": "Earliest start",
  "modal.interruptible": "Interruptible",
  "modal.yes": "Yes",
  "modal.no": "No",
  "modal.noDescription": "No description",
  "modal.editTask": "Edit Task",
  "modal.editBlockTitle": "Edit Block",
  "modal.save": "Save",
  "modal.cancel": "Cancel",
  "modal.task": "Task",
  "modal.start": "Start",
  "modal.end": "End"
};

const zh: Dictionary = {
  "header.eyebrow": "CLAND",
  "header.title": "当前时间",
  "header.generatePlan": "生成计划",
  "header.clearExplanation": "清空解释",
  "header.settings": "设置",
  "contact.label": "有问题联系",
  "nl.title": "自然语言输入",
  "nl.placeholder": "示例：下周三前完成方案初稿，总计 6 小时",
  "nl.parse": "AI 解析",
  "nl.parsing": "解析中...",
  "tasks.title": "任务列表",
  "tasks.empty": "还没有任务。",
  "tasks.remove": "移除",
  "tasks.prev": "上一页",
  "tasks.next": "下一页",
  "tasks.page": "第 {current} / {total} 页",
  "taskForm.new": "新建任务",
  "taskForm.edit": "编辑任务",
  "taskForm.title": "标题",
  "taskForm.description": "描述",
  "taskForm.titlePlaceholder": "项目方案",
  "taskForm.descriptionPlaceholder": "简要范围或备注",
  "taskForm.estimate": "预估时长（分钟）",
  "taskForm.priority": "优先级（1-5）",
  "taskForm.earliest": "最早开始时间",
  "taskForm.deadline": "截止时间",
  "taskForm.minBlock": "最小专注块（分钟）",
  "taskForm.maxBlock": "最大专注块（分钟）",
  "taskForm.interruptible": "允许拆分多个工作块",
  "taskForm.add": "添加任务",
  "taskForm.update": "更新任务",
  "taskForm.cancel": "取消",
  "taskForm.clear": "清空",
  "busy.title": "忙碌事件",
  "busy.defaultTitle": "会议",
  "busy.fieldTitle": "标题",
  "busy.start": "开始时间",
  "busy.end": "结束时间",
  "busy.add": "添加忙碌事件",
  "busy.empty": "暂无忙碌事件。",
  "busy.remove": "移除",
  "plan.title": "计划审阅",
  "plan.empty": "先生成计划以查看排程块。",
  "plan.replan": "重排剩余",
  "plan.warnings": "冲突提示",
  "plan.noWarnings": "暂无冲突。",
  "plan.assumptions": "假设条件",
  "plan.blocks": "工作块",
  "plan.explain": "解释计划",
  "plan.explaining": "解释中...",
  "plan.aiExplanation": "AI 解释",
  "plan.noExplanation": "暂无解释。",
  "plan.lock": "锁定",
  "plan.unknownTask": "未知任务",
  "calendar.title": "日程视图",
  "calendar.weekView": "七天一行",
  "calendar.focusView": "近三天",
  "calendar.morning": "上午",
  "calendar.afternoon": "下午",
  "calendar.evening": "晚上",
  "calendar.empty": "暂无安排",
  "memo.title": "备忘录",
  "memo.placeholder": "写下需要提醒的内容...",
  "knowledge.title": "知识库",
  "knowledge.categories": "分类",
  "knowledge.all": "全部",
  "knowledge.newCategory": "新建分类",
  "knowledge.addCategory": "添加",
  "knowledge.newEntry": "新增知识",
  "knowledge.entryTitle": "标题",
  "knowledge.entryContent": "内容",
  "knowledge.entryCategory": "分类",
  "knowledge.addEntry": "保存知识",
  "knowledge.list": "知识列表",
  "knowledge.empty": "暂无知识条目。",
  "knowledge.view": "查看",
  "knowledge.delete": "删除",
  "knowledge.uncategorized": "未分类",
  "knowledge.detailsTitle": "知识详情",
  "knowledge.category": "分类",
  "knowledge.createdAt": "创建时间",
  "knowledge.needContent": "请先填写内容再保存。",
  "knowledge.untitled": "未命名",
  "ai.title": "AI 助手",
  "ai.ask": "问答",
  "ai.classify": "分类",
  "ai.question": "问题",
  "ai.thinking": "思考中...",
  "ai.classifyHint": "使用 AI 为当前草稿分类。已有分类数：{count}",
  "ai.suggested": "推荐分类：",
  "ai.apply": "应用",
  "ai.noTitle": "未命名草稿",
  "ai.noContent": "暂无内容。",
  "ai.needQuestion": "请先输入问题。",
  "ai.needDraft": "请先填写草稿内容或标题。",
  "ai.failed": "AI 请求失败。",
  "settings.title": "设置",
  "settings.workingHours": "工作时间",
  "settings.start": "开始",
  "settings.end": "结束",
  "settings.lunchStart": "午休开始",
  "settings.lunchEnd": "午休结束",
  "settings.horizon": "规划天数",
  "settings.maxDaily": "每日专注上限（分钟）",
  "settings.timezone": "时区",
  "settings.language": "语言",
  "settings.aiTitle": "AI 接口",
  "settings.provider": "提供方",
  "settings.providerOpenAI": "OpenAI 兼容",
  "settings.providerAnthropic": "Anthropic 兼容",
  "settings.model": "模型",
  "settings.baseUrl": "接口地址",
  "settings.apiKey": "API Key",
  "settings.hint": "API 设置仅保存在本地。",
  "status.addTaskPrompt": "请先添加至少一个任务再生成计划。",
  "status.planGenerated": "计划生成于 {time}。",
  "status.parseEnter": "请输入任务文本后再解析。",
  "status.parsing": "正在解析任务...",
  "status.parsed": "已解析 {count} 个任务。",
  "status.parseFailed": "解析任务失败。",
  "status.explainNeedKey": "请先填写 API Key 才能生成解释。",
  "status.explainFailed": "生成解释失败。",
  "modal.close": "关闭",
  "modal.taskDetailsTitle": "任务详情",
  "modal.progress": "完成度",
  "modal.completed": "已完成",
  "modal.remaining": "剩余",
  "modal.details": "任务信息",
  "modal.priority": "优先级",
  "modal.estimate": "预计时长",
  "modal.minBlock": "最小块",
  "modal.maxBlock": "最大块",
  "modal.deadline": "截止时间",
  "modal.earliest": "最早开始",
  "modal.interruptible": "可拆分",
  "modal.yes": "是",
  "modal.no": "否",
  "modal.noDescription": "暂无备注",
  "modal.editTask": "编辑任务",
  "modal.editBlockTitle": "编辑工作块",
  "modal.save": "保存",
  "modal.cancel": "取消",
  "modal.task": "任务",
  "modal.start": "开始时间",
  "modal.end": "结束时间"
};

const dictionaries: Record<Language, Dictionary> = { en, zh };

export const createTranslator = (language: Language) => {
  const dict = dictionaries[language] ?? en;
  return (key: string, variables?: Record<string, string | number>) => {
    const fallback = en[key] ?? key;
    const template = dict[key] ?? fallback;
    return template.replace(/\{(\w+)\}/g, (_, token) => String(variables?.[token] ?? ""));
  };
};
